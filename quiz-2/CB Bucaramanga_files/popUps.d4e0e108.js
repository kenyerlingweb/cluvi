(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["popUps"],{1361:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.price>0?s("div",{staticClass:"price-main"},[t.promo?t._e():s("span",{staticClass:"text-md-body-1 font-weight-black text-price"},[t._v(" "+t._s(t.$n(t.price,"currency",t.instance.locale))+" ")]),t.promo?s("span",{staticClass:"text-md-body-1 font-weight-black text-price"},[t._v(" "+t._s(t.$n(t.price,"currency",t.instance.locale))+" ")]):t._e(),t.promo?s("br"):t._e(),t.promo?s("span",{staticClass:"text-decoration-line-through font-weight-light text-price"},[t._v(" "+t._s(t.$n(t.price_full,"currency",t.instance.locale))+" ")]):t._e()]):t._e()},o=[],c=s("5530"),a=s("2f62"),n={name:"PriceMain",props:["price","price_full","promo"],computed:Object(c["a"])({},Object(a["e"])("customer",["instance"]))},r=n,u=s("2877"),l=Object(u["a"])(r,i,o,!1,null,null,null);e["a"]=l.exports},3238:function(t,e,s){"use strict";s("7233")},"354d":function(t,e,s){},7233:function(t,e,s){},7536:function(t,e,s){"use strict";s("8e6a")},"758b":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"product-card mx-auto",attrs:{width:t.windowSize.x<720?"100vw":"19vw",elevation:"0",id:t.product.id},on:{click:function(e){return e.stopPropagation(),t.GoToProduct()}}},[s("div",{staticClass:"d-flex flex-no-wrap justify-space-between",staticStyle:{overflow:"hidden"}},[t.imageAvalaible?s("v-avatar",{staticClass:"ma-2",attrs:{size:t.windowSize.x<720?"15vw":"5vw",tile:"",rounded:"sm"}},[t.imageAvalaible?s("v-img",{attrs:{src:t.product.image.w_576},on:{click:function(e){return t.GoToProduct()}}}):t._e()],1):t._e(),s("div",{staticClass:"content-right"},[s("v-card-title",{staticClass:"product-card-title pl-1 pt-0 pb-2",domProps:{textContent:t._s(t.product.label)}}),s("v-row",{staticClass:"pt-0 mt-0"},[s("v-col",{staticClass:"pt-0 mt-0"},[s("price-main",{attrs:{price:t.product.price,price_full:t.product.price_full,promo:t.product.promo},on:{click:function(e){return t.GoToProduct()}}})],1),s("v-col",{staticClass:"text-right mr-2 pt-1 mt-0"},[s("v-btn",{attrs:{rounded:"","x-small":"",fab:!!t.showIcon,color:"primary"},on:{click:function(e){return e.stopPropagation(),t.GoToProduct()}}},[t.showIcon?s("v-icon",{attrs:{small:""}},[t._v(" fa-solid fa-heart ")]):t._e(),!t.validateAddCheckout||t.is_ontable_service&&t.is_ontable_mylist?t.validateAddCheckout?t._e():s("small",{domProps:{innerHTML:t._s(t.$t("products.add_label"))}}):s("small",{domProps:{innerHTML:t._s(t.$t("products.show_label"))}})],1)],1)],1)],1)],1)])},o=[],c=s("5530"),a=s("2f62"),n=s("01d9"),r=s("1361"),u={name:"ProductCardListUpselling",components:{PriceMain:r["a"]},props:{product:Object,validateAddCheckout:Boolean},data:function(){return{count:1,modal:!1}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(a["e"])("shared",["windowSize"])),Object(a["e"])("customer",["supplier"])),Object(a["c"])("customer",["is_ontable_mylist","is_ontable_basic"])),Object(a["c"])("order",["is_ontable_service"])),{},{imageAvalaible:function(){return void 0!==this.product.image&&null!==this.product.image&&null!==this.product.image.w_576&&void 0!==this.product.image.w_576&&this.product.image.w_576.length>0},showIcon:function(){return this.validateAddCheckout&&this.is_ontable_mylist}}),created:function(){null===this.product.price&&(this.product.price=0),this.$route.params.product_id||(this.modal=!0),null===this.product.price&&(cancelAnimationFrame.price=0)},methods:Object(c["a"])(Object(c["a"])({},Object(a["d"])("shared",["SetProductId"])),{},{GoToProduct:function(){this.validateAddCheckout?n["a"].trackEventCluvi({product:this.product},"click on upselling"):n["a"].trackEventCluvi({product:this.product},"click on upselling without transaction"),this.SetProductId(this.product.id),this.$emit("seeProductPopUp")}})},l=u,p=(s("7536"),s("2877")),d=s("6544"),h=s.n(d),m=s("8212"),v=s("8336"),f=s("b0af"),b=s("99d9"),_=s("62ad"),g=s("132d"),x=s("adda"),P=s("0fd9"),w=Object(p["a"])(l,i,o,!1,null,"f1d0cd34",null);e["a"]=w.exports;h()(w,{VAvatar:m["a"],VBtn:v["a"],VCard:f["a"],VCardTitle:b["d"],VCol:_["a"],VIcon:g["a"],VImg:x["a"],VRow:P["a"]})},"7cb4":function(t,e,s){"use strict";s("8a7f")},8308:function(t,e,s){},"8a7f":function(t,e,s){},"8e6a":function(t,e,s){},a214:function(t,e,s){"use strict";s.d(e,"e",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"d",(function(){return r})),s.d(e,"a",(function(){return u}));s("99af");var i=s("bc3a"),o=s.n(i),c=s("4360"),a={getServiceInfo:function(t,e){return o()({method:"get",url:"".concat("https://exp2.cluvi.com","/domain/rates/").concat(t,".json?token=").concat(e)})},sentService:function(t,e,s){return o()({method:"post",url:"".concat("https://exp2.cluvi.com","/domain/rates.json?purchase_id=").concat(t,"&token=").concat(e),data:{rate:s}})}},n={servicePolicies:function(){return o()({method:"get",url:"".concat("https://exp2.cluvi.com","/domain/service_policies?supplier_id=").concat(c["a"].state.customer.supplier.id)})}},r={precheckout:function(t,e){return o()({method:"put",url:"".concat("https://exp2.cluvi.com","/domain_v2/precheckout/").concat(t,".json"),headers:{profileid:c["a"].state.profile.profile.id,token:c["a"].state.profile.profile.token},data:{purchase:e}})}},u={getBanners:function(t){return o()({method:"get",url:"".concat("https://exp2.cluvi.com","/domain/content_popups.json?supplier_id=").concat(c["a"].state.customer.supplier.id,"&service=").concat(c["a"].state.order.service,"&trigger=").concat(t)})},getUpsellingProducts:function(){return o()({method:"get",url:"".concat("https://exp2.cluvi.com","/domain_v2/upselling_products.json?supplier_id=").concat(c["a"].state.customer.supplier.id,"&service=").concat(c["a"].state.order.service,"&subservice=").concat(c["a"].state.order.subservice)})}}},aed0:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.view_ok&&!t.seeProduct?s("v-dialog",{staticClass:"up-selling-popup mx-auto",attrs:{transition:"dialog-bottom-transition",width:"500"},on:{"click:outside":function(e){return t.closeDialog()}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.display_products?s("products-popup",{attrs:{products:t.products,labels:t.labels},on:{closePopup:t.closeDialog}}):t._e(),t.display_images?s("image-popup",{attrs:{popup:t.image_popup},on:{closePopup:t.closeDialog}}):t._e(),t.display_survey?s("satisfaction-survey",{on:{closePopup:t.closeDialog}}):t._e()],1):t._e()},o=[],c=s("5530"),a=(s("ac1f"),s("b0c0"),s("a214")),n=s("2f62"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{elevation:"0"}},[s("v-card-title",[s("v-row",{attrs:{dense:""}},[s("v-col",{attrs:{cols:"10"}},[s("h6",{domProps:{innerHTML:t._s(t.labels.label_popup_menu)}})]),s("v-spacer"),s("v-col",{attrs:{cols:"2"}},[s("v-icon",{on:{click:function(e){return t.closeBox()}}},[t._v("fa-light fa-xmark")])],1)],1)],1),s("v-card-text",t._l(t.products,(function(e){return s("product-card-list-upselling",{key:e.id,attrs:{product:e,validateAddCheckout:t.validateAddCheckout},on:{seeProductPopUp:function(s){return t.seeProductPopUp(e)}}})})),1)],1)},u=[],l=s("758b"),p=s("01d9"),d={name:"ProductsPopup",props:{seeProduct:Boolean,labels:Object,products:Array},data:function(){return{}},components:{ProductCardListUpselling:l["a"]},created:function(){this.validateAddCheckout||p["a"].trackEventCluvi({},"show upselling on menu without transaction"),this.validateAddCheckout&&p["a"].trackEventCluvi({},"show upselling")},methods:Object(c["a"])(Object(c["a"])({},Object(n["d"])("shared",["SetProductId"])),{},{closeBox:function(){this.$emit("closePopup")},seeProductPopUp:function(t){this.SetProductId(t.id)}}),computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(n["e"])("customer",["supplier"])),Object(n["e"])("order",["service"])),{},{validateAddCheckout:function(){return"delivery"===this.service||"take_away"===this.service||"on_table"===this.service&&"checkout"===this.supplier.on_table_class||"on_table"===this.service&&"my-list"===this.supplier.on_table_class}})},h=d,m=(s("d2bf"),s("2877")),v=s("6544"),f=s.n(v),b=s("b0af"),_=s("99d9"),g=s("62ad"),x=s("132d"),P=s("0fd9"),w=s("2fa4"),j=Object(m["a"])(h,r,u,!1,null,"0a35c56d",null),y=j.exports;f()(j,{VCard:b["a"],VCardText:_["c"],VCardTitle:_["d"],VCol:g["a"],VIcon:x["a"],VRow:P["a"],VSpacer:w["a"]});var k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-system-bar",{attrs:{"lights-out":""}},[s("v-spacer"),s("v-btn",{attrs:{"x-small":"",fab:"",rounded:"",icon:""},on:{click:function(e){return t.closeBox()}}},[s("v-icon",{attrs:{color:"red"}},[t._v("fa-light fa-xmark")])],1)],1),s("v-card",[s("v-card-title",{staticClass:"text-center",domProps:{innerHTML:t._s("Deseas contestar nuestra encuesta de satisfacci√≥n")}}),s("v-card-actions",{staticClass:"justify-center"},[s("v-btn",{attrs:{color:"primary",text:""},domProps:{innerHTML:t._s("En otro momento")},on:{click:function(e){return t.closeBox()}}}),s("v-btn",{staticClass:"rounded-pill",attrs:{color:"success"},domProps:{innerHTML:t._s("Responder")},on:{click:function(e){return t.openForm()}}})],1)],1)],1)},O=[],C={name:"SatisfactionSurvey",data:function(){return{dialog:!0}},computed:Object(c["a"])({},Object(n["e"])("customer",["supplier"])),methods:{openForm:function(){window.open("https://cluvi.me/kosurvey")},closeBox:function(){this.$emit("closePopup")}}},V=C,I=(s("f659"),s("8336")),T=(s("a9e3"),s("c7cd"),s("8308"),s("3a66")),$=s("a9ad"),B=s("7560"),S=s("58df"),A=s("80d2"),U=Object(S["a"])(Object(T["a"])("bar",["height","window"]),$["a"],B["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes:function(){return Object(c["a"])({"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window},this.themeClasses)},computedHeight:function(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles:function(){return{height:Object(A["h"])(this.computedHeight)}}},methods:{updateApplication:function(){return this.$el?this.$el.clientHeight:this.computedHeight}},render:function(t){var e={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return t("div",this.setBackgroundColor(this.color,e),Object(A["t"])(this))}}),E=Object(m["a"])(V,k,O,!1,null,"eac4f3a4",null),H=E.exports;f()(E,{VBtn:I["a"],VCard:b["a"],VCardActions:_["a"],VCardTitle:_["d"],VIcon:x["a"],VSpacer:w["a"],VSystemBar:U});var M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-system-bar",{attrs:{"lights-out":""}},[s("v-spacer"),s("v-btn",{attrs:{"x-small":"",fab:"",rounded:"",icon:""},on:{click:function(e){return t.closeBox()}}},[s("v-icon",{attrs:{color:"red"}},[t._v("fa-light fa-xmark")])],1)],1),s("v-img",{attrs:{width:"100%",src:t.popup.image.w_768},on:{click:function(e){t.clickBanner(t.popup.url,{content_popup:t.popup})&&t.closeBox()||t.closeBox()}}})],1)},D=[],L=s("9c9e"),G={name:"ImagePopup",props:{popup:Object},mixins:[L["a"]],created:function(){p["a"].trackEventCluvi({content_popup:this.popup},"open popup")},computed:Object(c["a"])({},Object(n["e"])("customer",["supplier"])),methods:{closeBox:function(){this.$emit("closePopup")}}},z=G,F=(s("3238"),s("adda")),N=Object(m["a"])(z,M,D,!1,null,"04e16fbe",null),R=N.exports;f()(N,{VBtn:I["a"],VIcon:x["a"],VImg:F["a"],VSpacer:w["a"],VSystemBar:U});var J={name:"PopUps",props:{seeProduct:Boolean},data:function(){return{visible:!1,exec:1,timeout:null,display_products:!1,display_images:!1,display_survey:!1,time_steps:[4e4,4e4,1e8,1e8,1e8,1e8],products:[],labels:{},images_popups:[],image_popup_index:0,image_popup:{}}},components:{ImagePopup:R,ProductsPopup:y,SatisfactionSurvey:H},created:function(){this.getUpsellingProducts(),this.getPopupImages(),null!=this.instance.popup_frecuency&&this.instance.popup_frecuency.length>0&&(this.time_steps=this.instance.popup_frecuency),this.setTimeTo()},methods:Object(c["a"])(Object(c["a"])({},Object(n["d"])("shared",["SetProductId"])),{},{setPauta:function(){if("kokoriko"===this.instance.slug&&2===this.exec)return this.display_survey=!0,void(this.visible=!0);this.visible=!1,this.display_products=!1,1===this.exec&&this.images_popups.length>0&&this.setImagePopup(),this.products.length>0&&this.exec>1&&(this.visible=!0,this.display_products=!0),this.visible||this.closeDialog(),this.getUpsellingProducts(),this.getPopupImages()},setImagePopup:function(){this.image_popup=this.images_popups[this.image_popup_index],this.display_images=!1,this.visible=!1,this.images_popups.length>this.image_popup_index&&(this.display_images=!0,this.visible=!0),this.image_popup_index++},setTimeTo:function(){var t=this,e=48e4;this.time_steps.length>=this.exec&&(e=this.time_steps[this.exec-1]),this.timeout=setTimeout((function(){t.setPauta()}),e)},closeDialog:function(){this.exec++,this.display_products=!1,this.display_images=!1,this.visible=!1,this.setTimeTo()},getUpsellingProducts:function(){var t=this;a["a"].getUpsellingProducts().then((function(e){t.products=e.data.products,t.labels=e.data.labels})).catch((function(t){console.error(t)}))},getPopupImages:function(){var t=this;a["a"].getBanners("en-menu").then((function(e){t.images_popups=e.data})).catch((function(t){console.error(t)}))}}),destroyed:function(){clearTimeout(this.timeout)},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(n["e"])("customer",["supplier","instance"])),Object(n["e"])("order",["service","subservice"])),{},{view_ok:function(){return"OnTableHome"===this.$route.name||"Home"===this.$route.name||"Menu"===this.$route.name||"SubCategories"===this.$route.name||"MainCategories"===this.$route.name}})},q=J,K=(s("7cb4"),s("169a")),Q=Object(m["a"])(q,i,o,!1,null,"7bbbaf2d",null);e["default"]=Q.exports;f()(Q,{VDialog:K["a"]})},d2bf:function(t,e,s){"use strict";s("354d")},f5b1:function(t,e,s){},f659:function(t,e,s){"use strict";s("f5b1")}}]);
//# sourceMappingURL=popUps.d4e0e108.js.map